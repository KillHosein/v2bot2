# ุชุบุฑุงุช: ูุงุจู ุชุบุฑ ฺฉุฑุฏู ูุชูโูุง ุฑุจุงุช

## ุฎูุงุตู ุชุบุฑุงุช

ุงู ุจุฑูุฒุฑุณุงู ุฏู ูุดฺฉู ุงุตู ุฑุง ุจุฑุทุฑู ูโฺฉูุฏ:

### 1. ุฑูุน ูุดฺฉู ุงูุชุฎุงุจ ูพูู ุณุงุฎุช ุงฺฉุงูุช ุชุณุช โ

**ูุดฺฉู ูุจู:**
- ุชุงุจุน `admin_set_trial_panel_start` ุงุฒ `reply_text` ุงุณุชูุงุฏู ูโฺฉุฑุฏ ฺฉู ุจุงุนุซ ุงุฌุงุฏ ูพุงู ุฌุฏุฏ ูโุดุฏ
- ุงู ูุดฺฉู ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุถุนู ุงุฌุงุฏ ูโฺฉุฑุฏ

**ุฑุงูโุญู:**
- ุชุงุจุน ุจุฑูุฒุฑุณุงู ุดุฏ ู ุงฺฉููู ุงุฒ `_safe_edit_text` ุงุณุชูุงุฏู ูโฺฉูุฏ
- ูพุงู ูุจู ูุฑุงุด ูโุดูุฏ ุจู ุฌุง ุงุฌุงุฏ ูพุงู ุฌุฏุฏ
- ุจุง fallback ุจู `reply_text` ุฏุฑ ุตูุฑุช ุฎุทุง

**ูุงูโูุง ุชุบุฑ ุงูุชู:**
- `bot/handlers/admin.py` (ุฎุทูุท 4359-4376)

---

### 2. ูุงุจู ุชุบุฑ ฺฉุฑุฏู ุชูุงู ูุชูโูุง ุฑุจุงุช โ

**ูุดฺฉู ูุจู:**
- ูุชูโูุง ุฒุงุฏ ุฏุฑ ฺฉุฏ ูุงุฑุฏโฺฉุฏ ุดุฏู ุจูุฏูุฏ
- ุงุฏูู ููโุชูุงูุณุช ุงู ูุชูโูุง ุฑุง ุงุฒ ุทุฑู ูพูู ุชุบุฑ ุฏูุฏ
- ุจุฑุง ุชุบุฑ ูุฑ ูุชู ุจุงุฏ ฺฉุฏ ุฑุง ูุฑุงุด ูโฺฉุฑุฏ

**ุฑุงูโุญู:**
- ุชุงุจุน ฺฉูฺฉ `get_message_text()` ุจู `bot/db.py` ุงุถุงูู ุดุฏ
- ูุชูโูุง ูพุดโูุฑุถ ุฌุฏุฏ ุจู `initialize_default_content()` ุงุถุงูู ุดุฏูุฏ
- handler ูุง ุจุฑูุฒุฑุณุงู ุดุฏูุฏ ุชุง ุงุฒ ุฏุชุงุจุณ ูุชู ุจุฎูุงููุฏ

**ูุชูโูุง ูุงุจู ุชุบุฑ ุฌุฏุฏ:**
- โ ูุฏุฑุช ูพุงูโูุง ู ุตูุญุงุช
- โ ูุฏุฑุช ฺฉุงุฑุจุฑุงู
- โ ุขูุงุฑ ุฑุจุงุช
- โ ูุฏุฑุช ูพููโูุง
- โ ูุฏุฑุช ูพููโูุง
- โ ูุฏุฑุช ฺฉุงุฑุชโูุง ุจุงูฺฉ
- โ ุชูุธูุงุช ฺฉู ุฑุจุงุช
- โ ุงูุชุฎุงุจ ูพูู ุณุงุฎุช ุชุณุช
- โ ุงูุชุฎุงุจ ุงูุจุงูุฏ ฺฉุงููฺฏ ุชุณุช

**ูุงูโูุง ุชุบุฑ ุงูุชู:**
- `bot/db.py` (ุงุถุงูู ุดุฏู `get_message_text()` ู ูุชูโูุง ูพุดโูุฑุถ)
- `bot/handlers/admin.py` (ุงุณุชูุงุฏู ุงุฒ `get_message_text`)
- `bot/handlers/admin_messages.py` (ุงุณุชูุงุฏู ุงุฒ `get_message_text`)

---

## ูุญูู ุงุณุชูุงุฏู

### ุจุฑุง ุฑุจุงุชโูุง ุฌุฏุฏ:
ูุชูโูุง ูพุดโูุฑุถ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ ุงููู ุงุฌุฑุง ุจู ุฏุชุงุจุณ ุงุถุงูู ูโุดููุฏ.

### ุจุฑุง ุฑุจุงุชโูุง ููุฌูุฏ:
1. ุงุณฺฉุฑูพุช ุจุฑูุฒุฑุณุงู ุฑุง ุงุฌุฑุง ฺฉูุฏ:
```bash
python3 update_messages.py
```

2. ุง ุฏุณุช ุงุฒ ุทุฑู ูพูู ุงุฏูู:
   - ุจู ููู **"ูุฏุฑุช ูพุงูโูุง"** ุจุฑูุฏ
   - ุฏฺฉูู **"โ ุงูุฒูุฏู ูพุงู ุฌุฏุฏ"** ุฑุง ุจุฒูุฏ
   - ูุชูโูุง ุฒุฑ ุฑุง ุจุง ูุงูโูุง ูุดุฎุต ุดุฏู ุงุถุงูู ฺฉูุฏ:

| ูุงู ูพุงู | ูุชู ูพุดโูุฑุถ |
|----------|-------------|
| `admin_messages_menu` | ูุฏุฑุช ูพุงูโูุง ู ุตูุญุงุช: |
| `admin_users_menu` | ๐ฅ ูุฏุฑุช ฺฉุงุฑุจุฑุงู |
| `admin_stats_title` | ๐ **ุขูุงุฑ ุฑุจุงุช** |
| `admin_panels_menu` | ๐ฅ๏ธ ูุฏุฑุช ูพููโูุง |
| `admin_plans_menu` | ๐ ูุฏุฑุช ูพููโูุง |
| `admin_cards_menu` | ๐ณ ูุฏุฑุช ฺฉุงุฑุชโูุง ุจุงูฺฉ |
| `admin_settings_menu` | โ๏ธ **ุชูุธูุงุช ฺฉู ุฑุจุงุช** |
| `trial_panel_select` | ูพูู ุณุงุฎุช ุชุณุช ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ: |
| `trial_inbound_select` | ูุชู ุชูุถุญุงุช ุงูุชุฎุงุจ ุงูุจุงูุฏ |

---

## ูุฑุงุด ูุชูโูุง ุงุฒ ุทุฑู ูพูู ุงุฏูู

ูพุณ ุงุฒ ุจุฑูุฒุฑุณุงูุ ูโุชูุงูุฏ ุชูุงู ุงู ูุชูโูุง ุฑุง ุจู ุฑุงุญุช ูุฑุงุด ฺฉูุฏ:

1. ูุงุฑุฏ ุฑุจุงุช ุดูุฏ
2. ุจู **ูพูู ุงุฏูู** ุจุฑูุฏ
3. ฺฏุฒูู **"๐ ูุฏุฑุช ูพุงูโูุง"** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
4. ูพุงู ฺฉู ูโุฎูุงูุฏ ูุฑุงุด ฺฉูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
5. ุงุฒ ุฏฺฉูู **"โ๏ธ ูุฑุงุด ูุชู"** ุงุณุชูุงุฏู ฺฉูุฏ
6. ูุชู ุฌุฏุฏ ุฑุง ุงุฑุณุงู ฺฉูุฏ

---

## ูุฒุงุง

โ **ุงูุนุทุงูโูพุฐุฑ**: ุชูุงู ูุชูโูุง ูุงุจู ุชุบุฑ ูุณุชูุฏ ุจุฏูู ูุงุฒ ุจู ุฏุงูุด ุจุฑูุงููโููุณ

โ **ุณูููุช ุงุณุชูุงุฏู**: ูุฑุงุด ุงุฒ ุทุฑู ุฑุงุจุท ฺฉุงุฑุจุฑ ุฑุจุงุช

โ **ฺูุฏุฒุจุงูู**: ูโุชูุงูุฏ ูุชูโูุง ุฑุง ุจู ูุฑ ุฒุจุงู ุชุบุฑ ุฏูุฏ

โ **ุณุงุฒฺฏุงุฑ**: ฺฉุฏ ูุฏู ุจุง ููุงุฏุฑ ูพุดโูุฑุถ ฺฉุงุฑ ูโฺฉูุฏ

โ **ุจุฏูู ูุงุฒ ุจู ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ**: ุชุบุฑุงุช ุจูุงูุงุตูู ุงุนูุงู ูโุดููุฏ

---

## ูฺฉุงุช ูู

### ุชุงุจุน `get_message_text()`

```python
def get_message_text(message_name: str, default: str = '') -> str:
    """ุฏุฑุงูุช ูุชู ูพุงู ุงุฒ ุฏุชุงุจุณ ุจุง fallback ุจู ูุชู ูพุดโูุฑุถ"""
    try:
        row = query_db("SELECT text FROM messages WHERE message_name = ?", (message_name,), one=True)
        if row and row.get('text'):
            return row['text']
        return default
    except Exception:
        return default
```

ุงู ุชุงุจุน:
- ุงุจุชุฏุง ูุชู ุฑุง ุงุฒ ุฏุชุงุจุณ ูโุฎูุงูุฏ
- ุฏุฑ ุตูุฑุช ุนุฏู ูุฌูุฏุ ููุฏุงุฑ ูพุดโูุฑุถ ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ
- ุฏุฑ ุตูุฑุช ุฎุทุงุ ููุฏุงุฑ ูพุดโูุฑุถ ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ

### ุงุณุชูุงุฏู ุฏุฑ ฺฉุฏ

ูุจู:
```python
await _safe_edit_text(query.message, "ูพูู ุณุงุฎุช ุชุณุช ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ:", ...)
```

ุจุนุฏ:
```python
select_text = get_message_text('trial_panel_select', 'ูพูู ุณุงุฎุช ุชุณุช ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ:')
await _safe_edit_text(query.message, select_text, ...)
```

---

## ุขูุฏู

ุงู ุณุณุชู ุขูุงุฏู ุงุณุช ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ูุชูโูุง ุจุดุชุฑ. ุจุฑุง ุงูุฒูุฏู ูุชู ูุงุจู ุชุบุฑ ุฌุฏุฏ:

1. ูุชู ูพุดโูุฑุถ ุฑุง ุจู `default_messages` ุฏุฑ `bot/db.py` ุงุถุงูู ฺฉูุฏ
2. ุฏุฑ handler ูุฑุจูุทู ุงุฒ `get_message_text()` ุงุณุชูุงุฏู ฺฉูุฏ
3. ุงุณฺฉุฑูพุช `update_messages.py` ุฑุง ุจุฑูุฒุฑุณุงู ฺฉูุฏ (ุงุฎุชุงุฑ)

---

## ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:
- ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ุฏุชุงุจุณ ุฏุงุฑุง ุฌุฏูู `messages` ุงุณุช
- ุงุณฺฉุฑูพุช ุจุฑูุฒุฑุณุงู ุฑุง ุงุฌุฑุง ฺฉูุฏ
- ูุงฺฏโูุง ุฑุจุงุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ

ุจุฑุง ฺฏุฒุงุฑุด ุจุงฺฏ ุง ูพุดููุงุฏุ ุจู ูุฎุฒู ุงุตู ูพุฑูฺู ูุฑุงุฌุนู ฺฉูุฏ.
